"use strict";var cov_1g7kntax7u=function(){var path="C:\\Users\\PRAKASHSELVARAJ\\Blockchain\\Home Depot\\Development\\chaincode_0901\\src\\decorators\\repository.decorator.ts";var hash="5e8cc95d5af9b0780473411b6ae85d8898af9c49";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\PRAKASHSELVARAJ\\Blockchain\\Home Depot\\Development\\chaincode_0901\\src\\decorators\\repository.decorator.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:15},end:{line:3,column:35}},"2":{start:{line:4,column:15},end:{line:4,column:71}},"3":{start:{line:5,column:0},end:{line:5,column:28}},"4":{start:{line:6,column:31},end:{line:6,column:40}},"5":{start:{line:8,column:4},end:{line:29,column:6}},"6":{start:{line:9,column:8},end:{line:9,column:97}},"7":{start:{line:11,column:8},end:{line:14,column:9}},"8":{start:{line:12,column:12},end:{line:12,column:72}},"9":{start:{line:13,column:12},end:{line:13,column:49}},"10":{start:{line:15,column:8},end:{line:17,column:9}},"11":{start:{line:16,column:12},end:{line:16,column:38}},"12":{start:{line:18,column:8},end:{line:20,column:9}},"13":{start:{line:19,column:12},end:{line:19,column:51}},"14":{start:{line:22,column:20},end:{line:22,column:36}},"15":{start:{line:24,column:8},end:{line:24,column:45}},"16":{start:{line:26,column:8},end:{line:26,column:61}},"17":{start:{line:27,column:8},end:{line:27,column:61}},"18":{start:{line:28,column:8},end:{line:28,column:63}},"19":{start:{line:31,column:0},end:{line:31,column:32}},"20":{start:{line:34,column:4},end:{line:34,column:57}}},fnMap:{"0":{name:"Repository",decl:{start:{line:7,column:9},end:{line:7,column:19}},loc:{start:{line:7,column:87},end:{line:30,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:11},end:{line:8,column:12}},loc:{start:{line:8,column:28},end:{line:29,column:5}},line:8},"2":{name:"getCurrentPDCName",decl:{start:{line:33,column:15},end:{line:33,column:32}},loc:{start:{line:33,column:38},end:{line:35,column:1}},line:33}},branchMap:{"0":{loc:{start:{line:7,column:20},end:{line:7,column:85}},type:"default-arg",locations:[{start:{line:7,column:29},end:{line:7,column:85}}],line:7},"1":{loc:{start:{line:11,column:8},end:{line:14,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:14,column:9}},{start:{line:11,column:8},end:{line:14,column:9}}],line:11},"2":{loc:{start:{line:11,column:12},end:{line:11,column:73}},type:"binary-expr",locations:[{start:{line:11,column:12},end:{line:11,column:43}},{start:{line:11,column:47},end:{line:11,column:73}}],line:11},"3":{loc:{start:{line:15,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:17,column:9}},{start:{line:15,column:8},end:{line:17,column:9}}],line:15},"4":{loc:{start:{line:15,column:12},end:{line:15,column:73}},type:"binary-expr",locations:[{start:{line:15,column:12},end:{line:15,column:43}},{start:{line:15,column:47},end:{line:15,column:73}}],line:15},"5":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:18,column:8},end:{line:20,column:9}}],line:18},"6":{loc:{start:{line:18,column:12},end:{line:18,column:107}},type:"binary-expr",locations:[{start:{line:18,column:12},end:{line:18,column:38}},{start:{line:18,column:43},end:{line:18,column:75}},{start:{line:18,column:79},end:{line:18,column:106}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"5e8cc95d5af9b0780473411b6ae85d8898af9c49"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_1g7kntax7u.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const Logger=(cov_1g7kntax7u.s[1]++,require('../logger'));const logger=(cov_1g7kntax7u.s[2]++,Logger.getLogger('./decorators/repository.decorator.ts'));cov_1g7kntax7u.s[3]++;require("reflect-metadata");const ALL_REPOSITORY_CONFIGS=(cov_1g7kntax7u.s[4]++,new Map());function Repository(config=(cov_1g7kntax7u.b[0][0]++,{objectType:'',requirePDC:false,pdcResolver:null})){cov_1g7kntax7u.f[0]++;cov_1g7kntax7u.s[5]++;return constructor=>{cov_1g7kntax7u.f[1]++;cov_1g7kntax7u.s[6]++;logger.debug('@Repository args:',`config -> ${config},`,'Target ->',constructor.name);// Sanity checks for the provided config
cov_1g7kntax7u.s[7]++;if((cov_1g7kntax7u.b[2][0]++,config.objectType===undefined)||(cov_1g7kntax7u.b[2][1]++,config.objectType===null)){cov_1g7kntax7u.b[1][0]++;cov_1g7kntax7u.s[8]++;logger.debug('DECORATOR: target.name ='+constructor.name);cov_1g7kntax7u.s[9]++;config.objectType=constructor.name;}else{cov_1g7kntax7u.b[1][1]++;}cov_1g7kntax7u.s[10]++;if((cov_1g7kntax7u.b[4][0]++,config.requirePDC===undefined)||(cov_1g7kntax7u.b[4][1]++,config.requirePDC===null)){cov_1g7kntax7u.b[3][0]++;cov_1g7kntax7u.s[11]++;config.requirePDC=false;}else{cov_1g7kntax7u.b[3][1]++;}cov_1g7kntax7u.s[12]++;if((cov_1g7kntax7u.b[6][0]++,config.requirePDC===true)&&((cov_1g7kntax7u.b[6][1]++,config.pdcResolver===undefined)||(cov_1g7kntax7u.b[6][2]++,config.pdcResolver===null))){cov_1g7kntax7u.b[5][0]++;cov_1g7kntax7u.s[13]++;config.pdcResolver=getCurrentPDCName;}else{cov_1g7kntax7u.b[5][1]++;}// Create a key for storing the config for this instance using the target name and the propertyKey
const key=(cov_1g7kntax7u.s[14]++,constructor.name);// Store the config for this instance
cov_1g7kntax7u.s[15]++;ALL_REPOSITORY_CONFIGS[key]=config;// Store the individual config values as part of the class prototype
cov_1g7kntax7u.s[16]++;constructor.prototype.objectType=config.objectType;cov_1g7kntax7u.s[17]++;constructor.prototype.requirePDC=config.requirePDC;cov_1g7kntax7u.s[18]++;constructor.prototype.pdcResolver=config.pdcResolver;};}cov_1g7kntax7u.s[19]++;exports.Repository=Repository;;async function getCurrentPDCName(ctx){cov_1g7kntax7u.f[2]++;cov_1g7kntax7u.s[20]++;return'collection_'+ctx.clientIdentity.getMSPID();}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxQUkFLQVNIU0VMVkFSQUpcXEJsb2NrY2hhaW5cXEhvbWUgRGVwb3RcXERldmVsb3BtZW50XFxjaGFpbmNvZGVfMDkwMVxcc3JjXFxkZWNvcmF0b3JzXFxyZXBvc2l0b3J5LmRlY29yYXRvci50cyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxQUkFLQVNIU0VMVkFSQUpcXEJsb2NrY2hhaW5cXEhvbWUgRGVwb3RcXERldmVsb3BtZW50XFxjaGFpbmNvZGVfMDkwMVxcc3JjXFxkZWNvcmF0b3JzXFxyZXBvc2l0b3J5LmRlY29yYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLHNDQUFzQyxDQUFDLENBQUM7QUFDeEUsNEJBQTBCO0FBSTFCLE1BQU0sc0JBQXNCLEdBQW1DLElBQUksR0FBRyxFQUE0QixDQUFDO0FBU25HLFNBQWdCLFVBQVUsQ0FBQyxTQUE0QixFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFO0lBQzNHLE9BQU8sQ0FBQyxXQUFzQixFQUFFLEVBQUU7UUFDOUIsTUFBTSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSxhQUFhLE1BQU0sR0FBRyxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekYsd0NBQXdDO1FBQ3hDLElBQUksTUFBTSxDQUFDLFVBQVUsS0FBSyxTQUFTLElBQUksTUFBTSxDQUFDLFVBQVUsS0FBSyxJQUFJLEVBQUU7WUFDL0QsTUFBTSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUQsTUFBTSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDO1NBQ3hDO1FBQ0QsSUFBSSxNQUFNLENBQUMsVUFBVSxLQUFLLFNBQVMsSUFBSSxNQUFNLENBQUMsVUFBVSxLQUFLLElBQUksRUFBRTtZQUMvRCxNQUFNLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUM3QjtRQUNELElBQUksTUFBTSxDQUFDLFVBQVUsS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxLQUFLLFNBQVMsSUFBSSxNQUFNLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxFQUFFO1lBQ2pHLE1BQU0sQ0FBQyxXQUFXLEdBQUcsaUJBQWlCLENBQUM7U0FDMUM7UUFFRCxrR0FBa0c7UUFDbEcsTUFBTSxHQUFHLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQztRQUU3QixxQ0FBcUM7UUFDckMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBRXJDLG9FQUFvRTtRQUNwRSxXQUFXLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ3JELFdBQVcsQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFDckQsV0FBVyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUMzRCxDQUFDLENBQUM7QUFDTixDQUFDO0FBM0JELGdDQTJCQztBQUFBLENBQUM7QUFJRixLQUFLLFVBQVUsaUJBQWlCLENBQUMsR0FBVztJQUN4QyxPQUFPLGFBQWEsR0FBRyxHQUFHLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmNvbnN0IExvZ2dlciA9IHJlcXVpcmUoJy4uL2xvZ2dlcicpO1xyXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKCcuL2RlY29yYXRvcnMvcmVwb3NpdG9yeS5kZWNvcmF0b3IudHMnKTtcclxuaW1wb3J0ICdyZWZsZWN0LW1ldGFkYXRhJztcclxuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJ2ZhYnJpYy1jb250cmFjdC1hcGknO1xyXG5cclxuXHJcbmNvbnN0IEFMTF9SRVBPU0lUT1JZX0NPTkZJR1MgOiBNYXA8U3ltYm9sLCBSZXBvc2l0b3J5Q29uZmlnPiA9IG5ldyBNYXA8U3ltYm9sLCBSZXBvc2l0b3J5Q29uZmlnPigpO1xyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVwb3NpdG9yeUNvbmZpZyB7XHJcbiAgICBvYmplY3RUeXBlOiBzdHJpbmc7XHJcbiAgICByZXF1aXJlUERDOiBib29sZWFuO1xyXG4gICAgcGRjUmVzb2x2ZXI/OiAoY3R4OkNvbnRleHQpPT5Qcm9taXNlPHN0cmluZz47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBSZXBvc2l0b3J5KGNvbmZpZyA6IFJlcG9zaXRvcnlDb25maWcgPSB7IG9iamVjdFR5cGU6ICcnLCByZXF1aXJlUERDOiBmYWxzZSwgcGRjUmVzb2x2ZXI6IG51bGwgfSkge1xyXG4gICAgcmV0dXJuIChjb25zdHJ1Y3RvciA6IEZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdAUmVwb3NpdG9yeSBhcmdzOicsIGBjb25maWcgLT4gJHtjb25maWd9LGAsICdUYXJnZXQgLT4nLCBjb25zdHJ1Y3Rvci5uYW1lKTtcclxuXHJcbiAgICAgICAgLy8gU2FuaXR5IGNoZWNrcyBmb3IgdGhlIHByb3ZpZGVkIGNvbmZpZ1xyXG4gICAgICAgIGlmIChjb25maWcub2JqZWN0VHlwZSA9PT0gdW5kZWZpbmVkIHx8IGNvbmZpZy5vYmplY3RUeXBlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnREVDT1JBVE9SOiB0YXJnZXQubmFtZSA9JyArIGNvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICAgICAgICBjb25maWcub2JqZWN0VHlwZSA9IGNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25maWcucmVxdWlyZVBEQyA9PT0gdW5kZWZpbmVkIHx8IGNvbmZpZy5yZXF1aXJlUERDID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5yZXF1aXJlUERDID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25maWcucmVxdWlyZVBEQyA9PT0gdHJ1ZSAmJiAoY29uZmlnLnBkY1Jlc29sdmVyID09PSB1bmRlZmluZWQgfHwgY29uZmlnLnBkY1Jlc29sdmVyID09PSBudWxsKSkge1xyXG4gICAgICAgICAgICBjb25maWcucGRjUmVzb2x2ZXIgPSBnZXRDdXJyZW50UERDTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIGtleSBmb3Igc3RvcmluZyB0aGUgY29uZmlnIGZvciB0aGlzIGluc3RhbmNlIHVzaW5nIHRoZSB0YXJnZXQgbmFtZSBhbmQgdGhlIHByb3BlcnR5S2V5XHJcbiAgICAgICAgY29uc3Qga2V5ID0gY29uc3RydWN0b3IubmFtZTtcclxuXHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIGNvbmZpZyBmb3IgdGhpcyBpbnN0YW5jZVxyXG4gICAgICAgIEFMTF9SRVBPU0lUT1JZX0NPTkZJR1Nba2V5XSA9IGNvbmZpZztcclxuXHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIGluZGl2aWR1YWwgY29uZmlnIHZhbHVlcyBhcyBwYXJ0IG9mIHRoZSBjbGFzcyBwcm90b3R5cGVcclxuICAgICAgICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUub2JqZWN0VHlwZSA9IGNvbmZpZy5vYmplY3RUeXBlO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZXF1aXJlUERDID0gY29uZmlnLnJlcXVpcmVQREM7XHJcbiAgICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlLnBkY1Jlc29sdmVyID0gY29uZmlnLnBkY1Jlc29sdmVyO1xyXG4gICAgfTtcclxufTtcclxuXHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFBEQ05hbWUoY3R4OkNvbnRleHQpIDogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiAnY29sbGVjdGlvbl8nICsgY3R4LmNsaWVudElkZW50aXR5LmdldE1TUElEKCk7XHJcbn0iXX0=