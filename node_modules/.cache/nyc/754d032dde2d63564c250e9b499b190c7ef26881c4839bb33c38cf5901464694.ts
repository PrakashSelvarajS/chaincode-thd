"use strict";var cov_oqtmdqra5=function(){var path="C:\\Users\\PRAKASHSELVARAJ\\Blockchain\\Home Depot\\Development\\chaincode_0901\\src\\contracts\\unit-of-measure.contract.ts";var hash="0e9e99c250a844ddc4d0c598b858bc4ce3c6d40c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\PRAKASHSELVARAJ\\Blockchain\\Home Depot\\Development\\chaincode_0901\\src\\contracts\\unit-of-measure.contract.ts",statementMap:{"0":{start:{line:2,column:17},end:{line:7,column:1}},"1":{start:{line:3,column:12},end:{line:3,column:28}},"2":{start:{line:3,column:34},end:{line:3,column:125}},"3":{start:{line:4,column:4},end:{line:5,column:150}},"4":{start:{line:4,column:79},end:{line:4,column:131}},"5":{start:{line:5,column:9},end:{line:5,column:150}},"6":{start:{line:5,column:22},end:{line:5,column:43}},"7":{start:{line:5,column:58},end:{line:5,column:150}},"8":{start:{line:5,column:81},end:{line:5,column:150}},"9":{start:{line:6,column:4},end:{line:6,column:66}},"10":{start:{line:8,column:17},end:{line:10,column:1}},"11":{start:{line:9,column:4},end:{line:9,column:109}},"12":{start:{line:9,column:79},end:{line:9,column:109}},"13":{start:{line:11,column:0},end:{line:11,column:62}},"14":{start:{line:12,column:30},end:{line:12,column:60}},"15":{start:{line:13,column:17},end:{line:13,column:37}},"16":{start:{line:14,column:23},end:{line:14,column:49}},"17":{start:{line:15,column:28},end:{line:65,column:1}},"18":{start:{line:16,column:20},end:{line:16,column:77}},"19":{start:{line:19,column:19},end:{line:19,column:70}},"20":{start:{line:21,column:30},end:{line:21,column:46}},"21":{start:{line:22,column:24},end:{line:22,column:26}},"22":{start:{line:24,column:8},end:{line:48,column:9}},"23":{start:{line:25,column:12},end:{line:25,column:87}},"24":{start:{line:26,column:29},end:{line:26,column:79}},"25":{start:{line:27,column:12},end:{line:27,column:55}},"26":{start:{line:28,column:12},end:{line:28,column:41}},"27":{start:{line:32,column:12},end:{line:40,column:13}},"28":{start:{line:33,column:42},end:{line:33,column:130}},"29":{start:{line:33,column:92},end:{line:33,column:127}},"30":{start:{line:34,column:16},end:{line:39,column:17}},"31":{start:{line:36,column:20},end:{line:36,column:95}},"32":{start:{line:37,column:20},end:{line:37,column:77}},"33":{start:{line:38,column:20},end:{line:38,column:50}},"34":{start:{line:42,column:42},end:{line:42,column:167}},"35":{start:{line:42,column:72},end:{line:42,column:164}},"36":{start:{line:42,column:130},end:{line:42,column:153}},"37":{start:{line:43,column:12},end:{line:46,column:13}},"38":{start:{line:44,column:16},end:{line:44,column:71}},"39":{start:{line:45,column:16},end:{line:45,column:59}},"40":{start:{line:47,column:12},end:{line:47,column:65}},"41":{start:{line:49,column:8},end:{line:49,column:25}},"42":{start:{line:53,column:8},end:{line:53,column:79}},"43":{start:{line:56,column:19},end:{line:56,column:70}},"44":{start:{line:57,column:32},end:{line:57,column:48}},"45":{start:{line:58,column:8},end:{line:63,column:9}},"46":{start:{line:59,column:12},end:{line:59,column:22}},"47":{start:{line:62,column:12},end:{line:62,column:41}},"48":{start:{line:66,column:0},end:{line:73,column:63}},"49":{start:{line:74,column:0},end:{line:80,column:67}},"50":{start:{line:81,column:0},end:{line:84,column:26}},"51":{start:{line:85,column:0},end:{line:85,column:54}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:46},end:{line:2,column:47}},loc:{start:{line:2,column:87},end:{line:7,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:46},end:{line:8,column:47}},loc:{start:{line:8,column:62},end:{line:10,column:1}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:18},end:{line:16,column:79}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:4},end:{line:18,column:5}},loc:{start:{line:18,column:42},end:{line:50,column:5}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:74},end:{line:33,column:75}},loc:{start:{line:33,column:90},end:{line:33,column:129}},line:33},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:57},end:{line:42,column:58}},loc:{start:{line:42,column:70},end:{line:42,column:166}},line:42},"6":{name:"(anonymous_6)",decl:{start:{line:42,column:112},end:{line:42,column:113}},loc:{start:{line:42,column:128},end:{line:42,column:155}},line:42},"7":{name:"(anonymous_7)",decl:{start:{line:52,column:4},end:{line:52,column:5}},loc:{start:{line:52,column:40},end:{line:54,column:5}},line:52},"8":{name:"(anonymous_8)",decl:{start:{line:55,column:4},end:{line:55,column:5}},loc:{start:{line:55,column:37},end:{line:64,column:5}},line:55}},branchMap:{"0":{loc:{start:{line:2,column:17},end:{line:7,column:1}},type:"binary-expr",locations:[{start:{line:2,column:18},end:{line:2,column:22}},{start:{line:2,column:26},end:{line:2,column:41}},{start:{line:2,column:46},end:{line:7,column:1}}],line:2},"1":{loc:{start:{line:3,column:34},end:{line:3,column:125}},type:"cond-expr",locations:[{start:{line:3,column:42},end:{line:3,column:48}},{start:{line:3,column:51},end:{line:3,column:125}}],line:3},"2":{loc:{start:{line:3,column:51},end:{line:3,column:125}},type:"cond-expr",locations:[{start:{line:3,column:67},end:{line:3,column:118}},{start:{line:3,column:121},end:{line:3,column:125}}],line:3},"3":{loc:{start:{line:4,column:4},end:{line:5,column:150}},type:"if",locations:[{start:{line:4,column:4},end:{line:5,column:150}},{start:{line:4,column:4},end:{line:5,column:150}}],line:4},"4":{loc:{start:{line:4,column:8},end:{line:4,column:77}},type:"binary-expr",locations:[{start:{line:4,column:8},end:{line:4,column:35}},{start:{line:4,column:39},end:{line:4,column:77}}],line:4},"5":{loc:{start:{line:5,column:58},end:{line:5,column:150}},type:"if",locations:[{start:{line:5,column:58},end:{line:5,column:150}},{start:{line:5,column:58},end:{line:5,column:150}}],line:5},"6":{loc:{start:{line:5,column:85},end:{line:5,column:149}},type:"binary-expr",locations:[{start:{line:5,column:86},end:{line:5,column:143}},{start:{line:5,column:148},end:{line:5,column:149}}],line:5},"7":{loc:{start:{line:5,column:86},end:{line:5,column:143}},type:"cond-expr",locations:[{start:{line:5,column:94},end:{line:5,column:98}},{start:{line:5,column:101},end:{line:5,column:143}}],line:5},"8":{loc:{start:{line:5,column:101},end:{line:5,column:143}},type:"cond-expr",locations:[{start:{line:5,column:109},end:{line:5,column:126}},{start:{line:5,column:129},end:{line:5,column:143}}],line:5},"9":{loc:{start:{line:6,column:11},end:{line:6,column:62}},type:"binary-expr",locations:[{start:{line:6,column:11},end:{line:6,column:16}},{start:{line:6,column:20},end:{line:6,column:21}},{start:{line:6,column:25},end:{line:6,column:62}}],line:6},"10":{loc:{start:{line:8,column:17},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:8,column:18},end:{line:8,column:22}},{start:{line:8,column:26},end:{line:8,column:41}},{start:{line:8,column:46},end:{line:10,column:1}}],line:8},"11":{loc:{start:{line:9,column:4},end:{line:9,column:109}},type:"if",locations:[{start:{line:9,column:4},end:{line:9,column:109}},{start:{line:9,column:4},end:{line:9,column:109}}],line:9},"12":{loc:{start:{line:9,column:8},end:{line:9,column:77}},type:"binary-expr",locations:[{start:{line:9,column:8},end:{line:9,column:35}},{start:{line:9,column:39},end:{line:9,column:77}}],line:9},"13":{loc:{start:{line:24,column:8},end:{line:48,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:48,column:9}},{start:{line:24,column:8},end:{line:48,column:9}}],line:24},"14":{loc:{start:{line:24,column:12},end:{line:24,column:118}},type:"binary-expr",locations:[{start:{line:24,column:12},end:{line:24,column:41}},{start:{line:24,column:45},end:{line:24,column:80}},{start:{line:24,column:84},end:{line:24,column:118}}],line:24},"15":{loc:{start:{line:34,column:16},end:{line:39,column:17}},type:"if",locations:[{start:{line:34,column:16},end:{line:39,column:17}},{start:{line:34,column:16},end:{line:39,column:17}}],line:34},"16":{loc:{start:{line:43,column:12},end:{line:46,column:13}},type:"if",locations:[{start:{line:43,column:12},end:{line:46,column:13}},{start:{line:43,column:12},end:{line:46,column:13}}],line:43},"17":{loc:{start:{line:58,column:8},end:{line:63,column:9}},type:"if",locations:[{start:{line:58,column:8},end:{line:63,column:9}},{start:{line:58,column:8},end:{line:63,column:9}}],line:58},"18":{loc:{start:{line:58,column:12},end:{line:58,column:117}},type:"binary-expr",locations:[{start:{line:58,column:12},end:{line:58,column:41}},{start:{line:58,column:45},end:{line:58,column:80}},{start:{line:58,column:84},end:{line:58,column:117}}],line:58}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"0e9e99c250a844ddc4d0c598b858bc4ce3c6d40c"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var __decorate=(cov_oqtmdqra5.s[0]++,(cov_oqtmdqra5.b[0][0]++,this)&&(cov_oqtmdqra5.b[0][1]++,this.__decorate)||(cov_oqtmdqra5.b[0][2]++,function(decorators,target,key,desc){cov_oqtmdqra5.f[0]++;var c=(cov_oqtmdqra5.s[1]++,arguments.length),r=(cov_oqtmdqra5.s[2]++,c<3?(cov_oqtmdqra5.b[1][0]++,target):(cov_oqtmdqra5.b[1][1]++,desc===null?(cov_oqtmdqra5.b[2][0]++,desc=Object.getOwnPropertyDescriptor(target,key)):(cov_oqtmdqra5.b[2][1]++,desc))),d;cov_oqtmdqra5.s[3]++;if((cov_oqtmdqra5.b[4][0]++,typeof Reflect==="object")&&(cov_oqtmdqra5.b[4][1]++,typeof Reflect.decorate==="function")){cov_oqtmdqra5.b[3][0]++;cov_oqtmdqra5.s[4]++;r=Reflect.decorate(decorators,target,key,desc);}else{cov_oqtmdqra5.b[3][1]++;cov_oqtmdqra5.s[5]++;for(var i=(cov_oqtmdqra5.s[6]++,decorators.length-1);i>=0;i--){cov_oqtmdqra5.s[7]++;if(d=decorators[i]){cov_oqtmdqra5.b[5][0]++;cov_oqtmdqra5.s[8]++;r=(cov_oqtmdqra5.b[6][0]++,c<3?(cov_oqtmdqra5.b[7][0]++,d(r)):(cov_oqtmdqra5.b[7][1]++,c>3?(cov_oqtmdqra5.b[8][0]++,d(target,key,r)):(cov_oqtmdqra5.b[8][1]++,d(target,key))))||(cov_oqtmdqra5.b[6][1]++,r);}else{cov_oqtmdqra5.b[5][1]++;}}}cov_oqtmdqra5.s[9]++;return(cov_oqtmdqra5.b[9][0]++,c>3)&&(cov_oqtmdqra5.b[9][1]++,r)&&(cov_oqtmdqra5.b[9][2]++,Object.defineProperty(target,key,r)),r;}));var __metadata=(cov_oqtmdqra5.s[10]++,(cov_oqtmdqra5.b[10][0]++,this)&&(cov_oqtmdqra5.b[10][1]++,this.__metadata)||(cov_oqtmdqra5.b[10][2]++,function(k,v){cov_oqtmdqra5.f[1]++;cov_oqtmdqra5.s[11]++;if((cov_oqtmdqra5.b[12][0]++,typeof Reflect==="object")&&(cov_oqtmdqra5.b[12][1]++,typeof Reflect.metadata==="function")){cov_oqtmdqra5.b[11][0]++;cov_oqtmdqra5.s[12]++;return Reflect.metadata(k,v);}else{cov_oqtmdqra5.b[11][1]++;}}));cov_oqtmdqra5.s[13]++;Object.defineProperty(exports,"__esModule",{value:true});const fabric_contract_api_1=(cov_oqtmdqra5.s[14]++,require("fabric-contract-api"));const models_1=(cov_oqtmdqra5.s[15]++,require("../models"));const repositories_1=(cov_oqtmdqra5.s[16]++,require("../repositories"));cov_oqtmdqra5.s[17]++;let UnitOfMeasureContract=class UnitOfMeasureContract extends fabric_contract_api_1.Contract{constructor(){cov_oqtmdqra5.f[2]++;cov_oqtmdqra5.s[18]++;super("com.homedepot.procurement.UnitOfMeasureContract");}// Used to merge new UOM data with existing UOM data
async saveUnitOfMeasure(ctx,newUOMs){cov_oqtmdqra5.f[3]++;let repo=(cov_oqtmdqra5.s[19]++,new repositories_1.UnitOfMeasureListRepository(ctx));// Get the list of existing UOM items
let existingUOMList=(cov_oqtmdqra5.s[20]++,await repo.get());let savedUOMs=(cov_oqtmdqra5.s[21]++,[]);// If there are no existing UOM items, then store the new UOM list
cov_oqtmdqra5.s[22]++;if((cov_oqtmdqra5.b[14][0]++,existingUOMList===undefined)||(cov_oqtmdqra5.b[14][1]++,existingUOMList.Items===undefined)||(cov_oqtmdqra5.b[14][2]++,existingUOMList.Items.length===0)){cov_oqtmdqra5.b[13][0]++;cov_oqtmdqra5.s[23]++;console.log('No UOM data, adding all the provided UOM data to the ledger');let newUOMList=(cov_oqtmdqra5.s[24]++,new models_1.UnitOfMeasureList({Items:newUOMs}));cov_oqtmdqra5.s[25]++;newUOMList=await repo.create(newUOMList);cov_oqtmdqra5.s[26]++;savedUOMs=newUOMList.Items;}else{cov_oqtmdqra5.b[13][1]++;cov_oqtmdqra5.s[27]++;// Update all the existing UOM with the new UOM, using SKU as a unique identifier
for(let currentNewUOM of newUOMs){const existingItemIndex=(cov_oqtmdqra5.s[28]++,existingUOMList.Items.findIndex((vv,ii,ll)=>{cov_oqtmdqra5.f[4]++;cov_oqtmdqra5.s[29]++;return currentNewUOM.SKU==vv.SKU;}));cov_oqtmdqra5.s[30]++;if(existingItemIndex>-1){cov_oqtmdqra5.b[15][0]++;cov_oqtmdqra5.s[31]++;// Overwrite the existing item values with the new values            
currentNewUOM.RecordID=existingUOMList.Items[existingItemIndex].RecordID;cov_oqtmdqra5.s[32]++;existingUOMList.Items[existingItemIndex]=currentNewUOM;cov_oqtmdqra5.s[33]++;savedUOMs.push(currentNewUOM);}else{cov_oqtmdqra5.b[15][1]++;}}// Get a list of records that are in the new list, but not in the existing list
let newUOMNotInExistingList=(cov_oqtmdqra5.s[34]++,newUOMs.filter((v,i,l)=>{cov_oqtmdqra5.f[5]++;cov_oqtmdqra5.s[35]++;return existingUOMList.Items.findIndex((vv,ii,ll)=>{cov_oqtmdqra5.f[6]++;cov_oqtmdqra5.s[36]++;return v.SKU==vv.SKU;})==-1;}));cov_oqtmdqra5.s[37]++;if(newUOMNotInExistingList.length>0){cov_oqtmdqra5.b[16][0]++;cov_oqtmdqra5.s[38]++;existingUOMList.Items.push(...newUOMNotInExistingList);cov_oqtmdqra5.s[39]++;savedUOMs.push(...newUOMNotInExistingList);}else{cov_oqtmdqra5.b[16][1]++;}cov_oqtmdqra5.s[40]++;existingUOMList=await repo.update(existingUOMList);}cov_oqtmdqra5.s[41]++;return savedUOMs;}// Delete an existing UOM record by its SKU
async deleteUnitOfMeasure(ctx,sku){cov_oqtmdqra5.f[7]++;cov_oqtmdqra5.s[42]++;throw new Error('ERROR: deleteUnitOfMeasure has not been implemented');}async retrieveUnitOfMeasure(ctx){cov_oqtmdqra5.f[8]++;let repo=(cov_oqtmdqra5.s[43]++,new repositories_1.UnitOfMeasureListRepository(ctx));const existingUOMList=(cov_oqtmdqra5.s[44]++,await repo.get());cov_oqtmdqra5.s[45]++;if((cov_oqtmdqra5.b[18][0]++,existingUOMList===undefined)||(cov_oqtmdqra5.b[18][1]++,existingUOMList.Items===undefined)&&(cov_oqtmdqra5.b[18][2]++,existingUOMList.Items.length==0)){cov_oqtmdqra5.b[17][0]++;cov_oqtmdqra5.s[46]++;return[];}else{cov_oqtmdqra5.b[17][1]++;cov_oqtmdqra5.s[47]++;return existingUOMList.Items;}}};cov_oqtmdqra5.s[48]++;__decorate([fabric_contract_api_1.Transaction(true),fabric_contract_api_1.Param("newUOMs","UnitOfMeasure[]"),fabric_contract_api_1.Returns('UnitOfMeasure[]'),__metadata("design:type",Function),__metadata("design:paramtypes",[fabric_contract_api_1.Context,Array]),__metadata("design:returntype",Promise)],UnitOfMeasureContract.prototype,"saveUnitOfMeasure",null);cov_oqtmdqra5.s[49]++;__decorate([fabric_contract_api_1.Transaction(false),fabric_contract_api_1.Returns('UnitOfMeasure[]'),__metadata("design:type",Function),__metadata("design:paramtypes",[fabric_contract_api_1.Context]),__metadata("design:returntype",Promise)],UnitOfMeasureContract.prototype,"retrieveUnitOfMeasure",null);cov_oqtmdqra5.s[50]++;UnitOfMeasureContract=__decorate([fabric_contract_api_1.Info({title:'UnitOfMeasureContract',description:'Contract for managing the "Unit-of-Measure" data for a Vendor'}),__metadata("design:paramtypes",[])],UnitOfMeasureContract);cov_oqtmdqra5.s[51]++;exports.UnitOfMeasureContract=UnitOfMeasureContract;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxQUkFLQVNIU0VMVkFSQUpcXEJsb2NrY2hhaW5cXEhvbWUgRGVwb3RcXERldmVsb3BtZW50XFxjaGFpbmNvZGVfMDkwMVxcc3JjXFxjb250cmFjdHNcXHVuaXQtb2YtbWVhc3VyZS5jb250cmFjdC50cyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxQUkFLQVNIU0VMVkFSQUpcXEJsb2NrY2hhaW5cXEhvbWUgRGVwb3RcXERldmVsb3BtZW50XFxjaGFpbmNvZGVfMDkwMVxcc3JjXFxjb250cmFjdHNcXHVuaXQtb2YtbWVhc3VyZS5jb250cmFjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLDZEQUEyRjtBQUMzRixzQ0FBNkQ7QUFDN0Qsa0RBQThEO0FBSzlELElBQWEscUJBQXFCLEdBQWxDLE1BQWEscUJBQXNCLFNBQVEsOEJBQVE7SUFHL0MsZ0JBQWdCLEtBQUssQ0FBQyxpREFBaUQsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUczRSxvREFBb0Q7SUFJN0MsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEdBQVksRUFBRSxPQUF3QjtRQUNqRSxJQUFJLElBQUksR0FBaUMsSUFBSSwwQ0FBMkIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUU5RSxxQ0FBcUM7UUFDckMsSUFBSSxlQUFlLEdBQXVCLE1BQU0sSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzNELElBQUksU0FBUyxHQUFxQixFQUFFLENBQUM7UUFFckMsa0VBQWtFO1FBQ2xFLElBQUksZUFBZSxLQUFLLFNBQVMsSUFBSSxlQUFlLENBQUMsS0FBSyxLQUFLLFNBQVMsSUFBSSxlQUFlLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDNUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2REFBNkQsQ0FBQyxDQUFDO1lBQzNFLElBQUksVUFBVSxHQUF1QixJQUFJLDBCQUFpQixDQUFDLEVBQUMsS0FBSyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7WUFDN0Us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LENBQUM7O0dBQzFHLHFCQUFxQixDQW9FakM7QUFwRVksc0RBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udGV4dCwgQ29udHJhY3QsIEluZm8sIFJldHVybnMsIFRyYW5zYWN0aW9uLCBQYXJhbSB9IGZyb20gJ2ZhYnJpYy1jb250cmFjdC1hcGknO1xyXG5pbXBvcnQgeyBVbml0T2ZNZWFzdXJlLCBVbml0T2ZNZWFzdXJlTGlzdCB9IGZyb20gXCIuLi9tb2RlbHNcIjtcclxuaW1wb3J0IHsgVW5pdE9mTWVhc3VyZUxpc3RSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzJztcclxuXHJcblxyXG5cclxuQEluZm8oeyB0aXRsZTogJ1VuaXRPZk1lYXN1cmVDb250cmFjdCcsIGRlc2NyaXB0aW9uOiAnQ29udHJhY3QgZm9yIG1hbmFnaW5nIHRoZSBcIlVuaXQtb2YtTWVhc3VyZVwiIGRhdGEgZm9yIGEgVmVuZG9yJyB9KVxyXG5leHBvcnQgY2xhc3MgVW5pdE9mTWVhc3VyZUNvbnRyYWN0IGV4dGVuZHMgQ29udHJhY3Qge1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoXCJjb20uaG9tZWRlcG90LnByb2N1cmVtZW50LlVuaXRPZk1lYXN1cmVDb250cmFjdFwiKTsgfVxyXG5cclxuXHJcbiAgICAvLyBVc2VkIHRvIG1lcmdlIG5ldyBVT00gZGF0YSB3aXRoIGV4aXN0aW5nIFVPTSBkYXRhXHJcbiAgICBAVHJhbnNhY3Rpb24odHJ1ZSlcclxuICAgIEBQYXJhbShcIm5ld1VPTXNcIiwgXCJVbml0T2ZNZWFzdXJlW11cIilcclxuICAgIEBSZXR1cm5zKCdVbml0T2ZNZWFzdXJlW10nKVxyXG4gICAgcHVibGljIGFzeW5jIHNhdmVVbml0T2ZNZWFzdXJlKGN0eDogQ29udGV4dCwgbmV3VU9NczogVW5pdE9mTWVhc3VyZVtdKTogUHJvbWlzZTxVbml0T2ZNZWFzdXJlW10+IHtcclxuICAgICAgICBsZXQgcmVwbyA6IFVuaXRPZk1lYXN1cmVMaXN0UmVwb3NpdG9yeSA9IG5ldyBVbml0T2ZNZWFzdXJlTGlzdFJlcG9zaXRvcnkoY3R4KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBHZXQgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgVU9NIGl0ZW1zXHJcbiAgICAgICAgbGV0IGV4aXN0aW5nVU9NTGlzdCA6IFVuaXRPZk1lYXN1cmVMaXN0ID0gYXdhaXQgcmVwby5nZXQoKTtcclxuICAgICAgICBsZXQgc2F2ZWRVT01zIDogVW5pdE9mTWVhc3VyZVtdID0gW107XHJcblxyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBVT00gaXRlbXMsIHRoZW4gc3RvcmUgdGhlIG5ldyBVT00gbGlzdFxyXG4gICAgICAgIGlmIChleGlzdGluZ1VPTUxpc3QgPT09IHVuZGVmaW5lZCB8fCBleGlzdGluZ1VPTUxpc3QuSXRlbXMgPT09IHVuZGVmaW5lZCB8fCBleGlzdGluZ1VPTUxpc3QuSXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBVT00gZGF0YSwgYWRkaW5nIGFsbCB0aGUgcHJvdmlkZWQgVU9NIGRhdGEgdG8gdGhlIGxlZGdlcicpO1xyXG4gICAgICAgICAgICBsZXQgbmV3VU9NTGlzdCA6IFVuaXRPZk1lYXN1cmVMaXN0ID0gbmV3IFVuaXRPZk1lYXN1cmVMaXN0KHtJdGVtczogbmV3VU9Nc30pO1xyXG4gICAgICAgICAgICBuZXdVT01MaXN0ID0gYXdhaXQgcmVwby5jcmVhdGUobmV3VU9NTGlzdCk7XHJcbiAgICAgICAgICAgIHNhdmVkVU9NcyA9IG5ld1VPTUxpc3QuSXRlbXM7XHJcbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCB0aGUgZXhpc3RpbmcgVU9NIHdpdGggdGhlIG5ldyBVT00sIHVzaW5nIFNLVSBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyXHJcbiAgICAgICAgICAgIGZvciAobGV0IGN1cnJlbnROZXdVT00gb2YgbmV3VU9NcykgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbUluZGV4IDogbnVtYmVyID0gZXhpc3RpbmdVT01MaXN0Lkl0ZW1zLmZpbmRJbmRleCgodnYsaWksbGwpPT57IHJldHVybiBjdXJyZW50TmV3VU9NLlNLVSA9PSB2di5TS1U7IH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGV4aXN0aW5nSXRlbUluZGV4ID4gLTEgKXsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgaXRlbSB2YWx1ZXMgd2l0aCB0aGUgbmV3IHZhbHVlcyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnROZXdVT00uUmVjb3JkSUQgPSBleGlzdGluZ1VPTUxpc3QuSXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdLlJlY29yZElEO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVU9NTGlzdC5JdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0gPSBjdXJyZW50TmV3VU9NO1xyXG4gICAgICAgICAgICAgICAgICAgIHNhdmVkVU9Ncy5wdXNoKGN1cnJlbnROZXdVT00pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICAgICAgLy8gR2V0IGEgbGlzdCBvZiByZWNvcmRzIHRoYXQgYXJlIGluIHRoZSBuZXcgbGlzdCwgYnV0IG5vdCBpbiB0aGUgZXhpc3RpbmcgbGlzdFxyXG4gICAgICAgICAgICBsZXQgbmV3VU9NTm90SW5FeGlzdGluZ0xpc3QgOiBVbml0T2ZNZWFzdXJlW10gPSBuZXdVT01zLmZpbHRlcigodixpLGwpPT57IHJldHVybiAoZXhpc3RpbmdVT01MaXN0Lkl0ZW1zLmZpbmRJbmRleCgodnYsaWksbGwpPT4geyByZXR1cm4gdi5TS1UgPT0gdnYuU0tVOyB9KSA9PSAtMSk7IH0pO1xyXG4gICAgICAgICAgICBpZiAobmV3VU9NTm90SW5FeGlzdGluZ0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdVT01MaXN0Lkl0ZW1zLnB1c2goLi4ubmV3VU9NTm90SW5FeGlzdGluZ0xpc3QpO1xyXG4gICAgICAgICAgICAgICAgc2F2ZWRVT01zLnB1c2goLi4ubmV3VU9NTm90SW5FeGlzdGluZ0xpc3QpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGV4aXN0aW5nVU9NTGlzdCA9IGF3YWl0IHJlcG8udXBkYXRlKGV4aXN0aW5nVU9NTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzYXZlZFVPTXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVsZXRlIGFuIGV4aXN0aW5nIFVPTSByZWNvcmQgYnkgaXRzIFNLVVxyXG4gICAgcHVibGljIGFzeW5jIGRlbGV0ZVVuaXRPZk1lYXN1cmUoY3R4OiBDb250ZXh0LCBza3U6IHN0cmluZykgOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VSUk9SOiBkZWxldGVVbml0T2ZNZWFzdXJlIGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIEBUcmFuc2FjdGlvbihmYWxzZSlcclxuICAgIEBSZXR1cm5zKCdVbml0T2ZNZWFzdXJlW10nKVxyXG4gICAgcHVibGljIGFzeW5jIHJldHJpZXZlVW5pdE9mTWVhc3VyZShjdHg6IENvbnRleHQpOiBQcm9taXNlPFVuaXRPZk1lYXN1cmVbXT4ge1xyXG4gICAgICAgIGxldCByZXBvIDogVW5pdE9mTWVhc3VyZUxpc3RSZXBvc2l0b3J5ID0gbmV3IFVuaXRPZk1lYXN1cmVMaXN0UmVwb3NpdG9yeShjdHgpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVU9NTGlzdCA6IFVuaXRPZk1lYXN1cmVMaXN0ID0gYXdhaXQgcmVwby5nZXQoKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdVT01MaXN0ID09PSB1bmRlZmluZWQgfHwgZXhpc3RpbmdVT01MaXN0Lkl0ZW1zID09PSB1bmRlZmluZWQgJiYgZXhpc3RpbmdVT01MaXN0Lkl0ZW1zLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdVT01MaXN0Lkl0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iXX0=