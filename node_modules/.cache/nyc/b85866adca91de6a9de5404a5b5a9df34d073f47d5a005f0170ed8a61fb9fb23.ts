"use strict";var cov_1dthqghz4=function(){var path="C:\\Users\\PRAKASHSELVARAJ\\Blockchain\\Home Depot\\Development\\chaincode_0901\\src\\___tests___\\vendor-contract.spec.ts";var hash="109fefdec612d3da5cc734bacbecb5adf99bf38d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\PRAKASHSELVARAJ\\Blockchain\\Home Depot\\Development\\chaincode_0901\\src\\___tests___\\vendor-contract.spec.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:22},end:{line:3,column:44}},"2":{start:{line:4,column:25},end:{line:4,column:52}},"3":{start:{line:5,column:13},end:{line:5,column:28}},"4":{start:{line:6,column:23},end:{line:6,column:50}},"5":{start:{line:7,column:14},end:{line:7,column:30}},"6":{start:{line:8,column:18},end:{line:8,column:39}},"7":{start:{line:9,column:16},end:{line:9,column:34}},"8":{start:{line:10,column:0},end:{line:10,column:14}},"9":{start:{line:11,column:0},end:{line:11,column:25}},"10":{start:{line:12,column:0},end:{line:12,column:20}},"11":{start:{line:15,column:8},end:{line:15,column:74}},"12":{start:{line:16,column:8},end:{line:16,column:85}},"13":{start:{line:17,column:8},end:{line:20,column:10}},"14":{start:{line:23,column:26},end:{line:23,column:65}},"15":{start:{line:24,column:17},end:{line:24,column:37}},"16":{start:{line:25,column:0},end:{line:125,column:3}},"17":{start:{line:28,column:23},end:{line:28,column:25}},"18":{start:{line:29,column:4},end:{line:67,column:7}},"19":{start:{line:31,column:8},end:{line:31,column:58}},"20":{start:{line:32,column:8},end:{line:32,column:32}},"21":{start:{line:33,column:8},end:{line:33,column:55}},"22":{start:{line:35,column:8},end:{line:44,column:15}},"23":{start:{line:46,column:8},end:{line:46,column:95}},"24":{start:{line:47,column:8},end:{line:47,column:178}},"25":{start:{line:49,column:23},end:{line:63,column:9}},"26":{start:{line:50,column:33},end:{line:50,column:40}},"27":{start:{line:52,column:16},end:{line:52,column:43}},"28":{start:{line:53,column:16},end:{line:61,column:18}},"29":{start:{line:57,column:38},end:{line:57,column:46}},"30":{start:{line:58,column:40},end:{line:58,column:81}},"31":{start:{line:64,column:8},end:{line:64,column:44}},"32":{start:{line:65,column:8},end:{line:65,column:38}},"33":{start:{line:66,column:8},end:{line:66,column:125}},"34":{start:{line:68,column:4},end:{line:119,column:7}},"35":{start:{line:69,column:8},end:{line:103,column:11}},"36":{start:{line:70,column:28},end:{line:79,column:13}},"37":{start:{line:80,column:31},end:{line:80,column:74}},"38":{start:{line:81,column:30},end:{line:81,column:32}},"39":{start:{line:82,column:12},end:{line:100,column:19}},"40":{start:{line:101,column:12},end:{line:101,column:202}},"41":{start:{line:102,column:12},end:{line:102,column:65}},"42":{start:{line:104,column:8},end:{line:118,column:11}},"43":{start:{line:105,column:32},end:{line:114,column:13}},"44":{start:{line:115,column:31},end:{line:115,column:78}},"45":{start:{line:116,column:12},end:{line:116,column:206}},"46":{start:{line:117,column:12},end:{line:117,column:69}},"47":{start:{line:120,column:4},end:{line:124,column:7}},"48":{start:{line:121,column:8},end:{line:123,column:11}},"49":{start:{line:122,column:12},end:{line:122,column:90}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:18},end:{line:21,column:5}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:25,column:27},end:{line:25,column:28}},loc:{start:{line:25,column:33},end:{line:125,column:1}},line:25},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:15},end:{line:29,column:16}},loc:{start:{line:29,column:21},end:{line:67,column:5}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:50,column:19},end:{line:50,column:20}},loc:{start:{line:50,column:31},end:{line:50,column:42}},line:50},"4":{name:"(anonymous_4)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:30},end:{line:62,column:13}},line:51},"5":{name:"(anonymous_5)",decl:{start:{line:57,column:32},end:{line:57,column:33}},loc:{start:{line:57,column:38},end:{line:57,column:46}},line:57},"6":{name:"(anonymous_6)",decl:{start:{line:58,column:34},end:{line:58,column:35}},loc:{start:{line:58,column:40},end:{line:58,column:81}},line:58},"7":{name:"(anonymous_7)",decl:{start:{line:68,column:28},end:{line:68,column:29}},loc:{start:{line:68,column:34},end:{line:119,column:5}},line:68},"8":{name:"(anonymous_8)",decl:{start:{line:69,column:37},end:{line:69,column:38}},loc:{start:{line:69,column:49},end:{line:103,column:9}},line:69},"9":{name:"(anonymous_9)",decl:{start:{line:104,column:37},end:{line:104,column:38}},loc:{start:{line:104,column:49},end:{line:118,column:9}},line:104},"10":{name:"(anonymous_10)",decl:{start:{line:120,column:32},end:{line:120,column:33}},loc:{start:{line:120,column:38},end:{line:124,column:5}},line:120},"11":{name:"(anonymous_11)",decl:{start:{line:121,column:44},end:{line:121,column:45}},loc:{start:{line:121,column:56},end:{line:123,column:9}},line:121}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"109fefdec612d3da5cc734bacbecb5adf99bf38d"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_1dthqghz4.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const fabric_shim_1=(cov_1dthqghz4.s[1]++,require("fabric-shim"));const ___test_helper_1=(cov_1dthqghz4.s[2]++,require("./___test-helper"));const chai=(cov_1dthqghz4.s[3]++,require("chai"));const chaiAsPromised=(cov_1dthqghz4.s[4]++,require("chai-as-promised"));const sinon=(cov_1dthqghz4.s[5]++,require("sinon"));const sinonChai=(cov_1dthqghz4.s[6]++,require("sinon-chai"));const winston=(cov_1dthqghz4.s[7]++,require("winston"));cov_1dthqghz4.s[8]++;chai.should();cov_1dthqghz4.s[9]++;chai.use(chaiAsPromised);cov_1dthqghz4.s[10]++;chai.use(sinonChai);class TestContext{constructor(){cov_1dthqghz4.f[0]++;cov_1dthqghz4.s[11]++;this.stub=sinon.createStubInstance(fabric_shim_1.ChaincodeStub);cov_1dthqghz4.s[12]++;this.clientIdentity=sinon.createStubInstance(fabric_shim_1.ClientIdentity);cov_1dthqghz4.s[13]++;this.logging={getLogger:sinon.stub().returns(sinon.createStubInstance(winston.createLogger().constructor)),setLevel:sinon.stub()};}}const vendor_contract_1=(cov_1dthqghz4.s[14]++,require("../contracts/vendor.contract"));const models_1=(cov_1dthqghz4.s[15]++,require("../models"));cov_1dthqghz4.s[16]++;describe('VendorContract',()=>{cov_1dthqghz4.f[1]++;let contract;let ctx;let sampleVendor=(cov_1dthqghz4.s[17]++,[]);cov_1dthqghz4.s[18]++;beforeEach(()=>{cov_1dthqghz4.f[2]++;cov_1dthqghz4.s[19]++;// Prepare the Contract and Context
contract=new vendor_contract_1.VendorContract();cov_1dthqghz4.s[20]++;ctx=new TestContext();cov_1dthqghz4.s[21]++;ctx.clientIdentity.getMSPID.returns('Org1MSP');// Load the sample data file
cov_1dthqghz4.s[22]++;sampleVendor=[{"RecordID":"DOES_EXIST","VendorID":"DOES_EXIST","ParentVendorID":"DOES_EXIST","Name":"Home Depot","TenantName":"homedepot","HLFOrganization":"HomeDepotOrg","HLFMemberServicesProvider":"HomeDepotMSP",LastUpdatedDate:12062019}];// Add Vendor List record, and record composite key creator
cov_1dthqghz4.s[23]++;ctx.stub.createCompositeKey.withArgs('vendor',['DEFAULT']).returns(' vendor DEFAULT');cov_1dthqghz4.s[24]++;ctx.stub.getPrivateData.withArgs(___test_helper_1.testPDCName,' vendor DEFAULT').resolves(Buffer.from(JSON.stringify(new models_1.VendorList({Items:sampleVendor}))));// Add all records for the find search
let iterator=(cov_1dthqghz4.s[25]++,{close:async()=>{cov_1dthqghz4.f[3]++;cov_1dthqghz4.s[26]++;return;},next:async()=>{cov_1dthqghz4.f[4]++;cov_1dthqghz4.s[27]++;iterator['currentIndex']++;cov_1dthqghz4.s[28]++;return{value:{key:'vendor',value:Buffer.from(JSON.stringify(iterator['allItems'][iterator['currentIndex']])),getKey:()=>{cov_1dthqghz4.f[5]++;cov_1dthqghz4.s[29]++;return'vendor';},getValue:()=>{cov_1dthqghz4.f[6]++;cov_1dthqghz4.s[30]++;return Buffer.from(JSON.stringify(sampleVendor));}},done:iterator['allItems'].length==iterator['currentIndex']+1};}});cov_1dthqghz4.s[31]++;iterator['allItems']=sampleVendor;cov_1dthqghz4.s[32]++;iterator['currentIndex']=-1;cov_1dthqghz4.s[33]++;ctx.stub.getPrivateDataByPartialCompositeKey.withArgs(___test_helper_1.testPDCName,'vendor',[]).resolves(iterator);});cov_1dthqghz4.s[34]++;describe('#saveVendor',()=>{cov_1dthqghz4.f[7]++;cov_1dthqghz4.s[35]++;it('should create a vendor',async()=>{cov_1dthqghz4.f[8]++;let newVendor=(cov_1dthqghz4.s[36]++,{"RecordID":"DOES_NOT_EXIST","VendorID":"DOES_NOT_EXIST","ParentVendorID":"DOES_NOT_EXIST","Name":"New Vendor","TenantName":"bosch","HLFOrganization":"BoschOrg","HLFMemberServicesProvider":"BoschMSP",LastUpdatedDate:12062019});let resultVendor=(cov_1dthqghz4.s[37]++,await contract.saveVendor(ctx,[newVendor]));let finalVendor=(cov_1dthqghz4.s[38]++,[]);cov_1dthqghz4.s[39]++;finalVendor=[{"RecordID":"DOES_EXIST","VendorID":"DOES_EXIST","ParentVendorID":"DOES_EXIST","Name":"Home Depot","TenantName":"homedepot","HLFOrganization":"HomeDepotOrg","HLFMemberServicesProvider":"HomeDepotMSP",LastUpdatedDate:12062019},{"RecordID":"DOES_NOT_EXIST","VendorID":"DOES_NOT_EXIST","ParentVendorID":"DOES_NOT_EXIST","Name":"New Vendor","TenantName":"bosch","HLFOrganization":"BoschOrg","HLFMemberServicesProvider":"BoschMSP",LastUpdatedDate:12062019}];cov_1dthqghz4.s[40]++;ctx.stub.putPrivateData.should.have.been.calledOnceWithExactly(___test_helper_1.testPDCName,' vendor DEFAULT',Buffer.from(JSON.stringify(new models_1.VendorList({Items:finalVendor}))));cov_1dthqghz4.s[41]++;chai.expect(resultVendor).to.deep.equal([newVendor]);});cov_1dthqghz4.s[42]++;it('should update a vendor',async()=>{cov_1dthqghz4.f[9]++;let updatedVendor=(cov_1dthqghz4.s[43]++,{RecordID:'DOES_EXIST',VendorID:'DOES_EXIST',ParentVendorID:'UPDATED_VENDOR_ID',Name:'Updated Vendor',TenantName:'lutron',HLFOrganization:'LutronOrg',HLFMemberServicesProvider:'LutronMSP',LastUpdatedDate:12062019});let resultVendor=(cov_1dthqghz4.s[44]++,await contract.saveVendor(ctx,[updatedVendor]));cov_1dthqghz4.s[45]++;ctx.stub.putPrivateData.should.have.been.calledOnceWithExactly(___test_helper_1.testPDCName,' vendor DEFAULT',Buffer.from(JSON.stringify(new models_1.VendorList({Items:[updatedVendor]}))));cov_1dthqghz4.s[46]++;chai.expect(resultVendor).to.deep.equal([updatedVendor]);});});cov_1dthqghz4.s[47]++;describe('#retrieveVendor',()=>{cov_1dthqghz4.f[10]++;cov_1dthqghz4.s[48]++;it('should return all Vendor data',async()=>{cov_1dthqghz4.f[11]++;cov_1dthqghz4.s[49]++;await contract.retrieveVendor(ctx).should.eventually.deep.equal(sampleVendor);});});});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxQUkFLQVNIU0VMVkFSQUpcXEJsb2NrY2hhaW5cXEhvbWUgRGVwb3RcXERldmVsb3BtZW50XFxjaGFpbmNvZGVfMDkwMVxcc3JjXFxfX190ZXN0c19fX1xcdmVuZG9yLWNvbnRyYWN0LnNwZWMudHMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcUFJBS0FTSFNFTFZBUkFKXFxCbG9ja2NoYWluXFxIb21lIERlcG90XFxEZXZlbG9wbWVudFxcY2hhaW5jb2RlXzA5MDFcXHNyY1xcX19fdGVzdHNfX19cXHZlbmRvci1jb250cmFjdC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsNkNBQXVFO0FBQ3ZFLHFEQUErQztBQUkvQyw2QkFBNkI7QUFDN0IsbURBQW1EO0FBQ25ELCtCQUErQjtBQUMvQix3Q0FBd0M7QUFDeEMsbUNBQW9DO0FBRXBDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUVwQixNQUFNLFdBQVc7SUFBakI7UUFDVyxTQUFJLEdBQThDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQywyQkFBYSxDQUFDLENBQUM7UUFDMUYsbUJBQWMsR0FBK0MsS0FBSyxDQUFDLGtCQUFrQixDQUFDLDRCQUFjLENBQUMsQ0FBQztRQUN0RyxZQUFPLEdBQUc7WUFDYixTQUFTLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzdGLFFBQVEsRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFO1NBQ3hCLENBQUM7SUFDUCxDQUFDO0NBQUE7QUFTRCxrRUFBOEQ7QUFDOUQsc0NBQThEO0FBRTlELFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7SUFFNUIs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bEYsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUdQLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJ2ZhYnJpYy1jb250cmFjdC1hcGknO1xyXG5pbXBvcnQgeyBDaGFpbmNvZGVTdHViLCBDbGllbnRJZGVudGl0eSwgSXRlcmF0b3JzIH0gZnJvbSAnZmFicmljLXNoaW0nO1xyXG5pbXBvcnQgeyB0ZXN0UERDTmFtZSB9IGZyb20gJy4vX19fdGVzdC1oZWxwZXInO1xyXG5cclxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgKiBhcyBjaGFpIGZyb20gJ2NoYWknO1xyXG5pbXBvcnQgKiBhcyBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcclxuaW1wb3J0ICogYXMgc2lub24gZnJvbSAnc2lub24nO1xyXG5pbXBvcnQgKiBhcyBzaW5vbkNoYWkgZnJvbSAnc2lub24tY2hhaSc7XHJcbmltcG9ydCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xyXG5cclxuY2hhaS5zaG91bGQoKTtcclxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xyXG5jaGFpLnVzZShzaW5vbkNoYWkpO1xyXG5cclxuY2xhc3MgVGVzdENvbnRleHQgaW1wbGVtZW50cyBDb250ZXh0IHtcclxuICAgIHB1YmxpYyBzdHViOiBzaW5vbi5TaW5vblN0dWJiZWRJbnN0YW5jZTxDaGFpbmNvZGVTdHViPiA9IHNpbm9uLmNyZWF0ZVN0dWJJbnN0YW5jZShDaGFpbmNvZGVTdHViKTtcclxuICAgIHB1YmxpYyBjbGllbnRJZGVudGl0eTogc2lub24uU2lub25TdHViYmVkSW5zdGFuY2U8Q2xpZW50SWRlbnRpdHk+ID0gc2lub24uY3JlYXRlU3R1Ykluc3RhbmNlKENsaWVudElkZW50aXR5KTtcclxuICAgIHB1YmxpYyBsb2dnaW5nID0ge1xyXG4gICAgICAgIGdldExvZ2dlcjogc2lub24uc3R1YigpLnJldHVybnMoc2lub24uY3JlYXRlU3R1Ykluc3RhbmNlKHdpbnN0b24uY3JlYXRlTG9nZ2VyKCkuY29uc3RydWN0b3IpKSxcclxuICAgICAgICBzZXRMZXZlbDogc2lub24uc3R1YigpLFxyXG4gICAgIH07XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5pbXBvcnQgeyBWZW5kb3JDb250cmFjdCB9IGZyb20gJy4uL2NvbnRyYWN0cy92ZW5kb3IuY29udHJhY3QnO1xyXG5pbXBvcnQgeyBWZW5kb3IsIFZlbmRvclNoaXBwZWQsIFZlbmRvckxpc3QgfSBmcm9tICcuLi9tb2RlbHMnO1xyXG5cclxuZGVzY3JpYmUoJ1ZlbmRvckNvbnRyYWN0JywgKCkgPT4ge1xyXG5cclxuICAgIGxldCBjb250cmFjdDogVmVuZG9yQ29udHJhY3Q7XHJcbiAgICBsZXQgY3R4OiBUZXN0Q29udGV4dDtcclxuXHJcbiAgICBsZXQgc2FtcGxlVmVuZG9yIDogVmVuZG9yW10gPSBbXTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAvLyBQcmVwYXJlIHRoZSBDb250cmFjdCBhbmQgQ29udGV4dFxyXG4gICAgICAgIGNvbnRyYWN0ID0gbmV3IFZlbmRvckNvbnRyYWN0KCk7XHJcbiAgICAgICAgY3R4ID0gbmV3IFRlc3RDb250ZXh0KCk7XHJcbiAgICAgICAgY3R4LmNsaWVudElkZW50aXR5LmdldE1TUElELnJldHVybnMoJ09yZzFNU1AnKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCB0aGUgc2FtcGxlIGRhdGEgZmlsZVxyXG4gICAgICAgIHNhbXBsZVZlbmRvciA9IFt7XHJcbiAgICAgICAgICAgIFwiUmVjb3JkSURcIjogXCJET0VTX0VYSVNUXCIsXHJcbiAgICAgICAgICAgIFwiVmVuZG9ySURcIjogXCJET0VTX0VYSVNUXCIsXHJcbiAgICAgICAgICAgIFwiUGFyZW50VmVuZG9ySURcIjogXCJET0VTX0VYSVNUXCIsXHJcbiAgICAgICAgICAgIFwiTmFtZVwiOiBcIkhvbWUgRGVwb3RcIixcclxuICAgICAgICAgICAgXCJUZW5hbnROYW1lXCI6IFwiaG9tZWRlcG90XCIsXHJcbiAgICAgICAgICAgIFwiSExGT3JnYW5pemF0aW9uXCI6IFwiSG9tZURlcG90T3JnXCIsXHJcbiAgICAgICAgICAgIFwiSExGTWVtYmVyU2VydmljZXNQcm92aWRlclwiOiBcIkhvbWVEZXBvdE1TUFwiLFxyXG4gICAgICAgICAgICBMYXN0VXBkYXRlZERhdGU6IDEyMDYyMDE5XHJcbiAgICAgICAgfV0gYXMgVmVuZG9yW107XHJcblxyXG4gICAgICAgIC8vIEFkZCBWZW5kb3IgTGlzdCByZWNvcmQsIGFuZCByZWNvcmQgY29tcG9zaXRlIGtleSBjcmVhdG9yXHJcbiAgICAgICAgY3R4LnN0dWIuY3JlYXRlQ29tcG9zaXRlS2V5LndpdGhBcmdzKCd2ZW5kb3InLCBbJ0RFRkFVTFQnXSkucmV0dXJucygnIHZlbmRvciBERUZBVUxUJyk7XHJcbiAgICAgICAgY3R4LnN0dWIuZ2V0UHJpdmF0ZURhdGEud2l0aEFyZ3ModGVzdFBEQ05hbWUsICcgdmVuZG9yIERFRkFVTFQnKS5yZXNvbHZlcyhCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShuZXcgVmVuZG9yTGlzdCh7IEl0ZW1zOiBzYW1wbGVWZW5kb3IgfSkpKSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBhbGwgcmVjb3JkcyBmb3IgdGhlIGZpbmQgc2VhcmNoXHJcbiAgICAgICAgbGV0IGl0ZXJhdG9yIDogSXRlcmF0b3JzLlN0YXRlUXVlcnlJdGVyYXRvciA9IHtcclxuICAgICAgICAgICAgY2xvc2U6IGFzeW5jICgpID0+IHsgcmV0dXJuOyB9LFxyXG4gICAgICAgICAgICBuZXh0OiBhc3luYyAoKSA9PiB7IFxyXG4gICAgICAgICAgICAgICAgaXRlcmF0b3JbJ2N1cnJlbnRJbmRleCddKys7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoaXRlcmF0b3JbJ2FsbEl0ZW1zJ11baXRlcmF0b3JbJ2N1cnJlbnRJbmRleCddXSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRLZXk6ICgpPT4ndmVuZG9yJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWU6ICgpPT5CdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShzYW1wbGVWZW5kb3IpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgSXRlcmF0b3JzLktWLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvbmUgOiAoaXRlcmF0b3JbJ2FsbEl0ZW1zJ10ubGVuZ3RoID09IGl0ZXJhdG9yWydjdXJyZW50SW5kZXgnXSsxKVxyXG4gICAgICAgICAgICAgICAgfSBhcyBJdGVyYXRvcnMuTmV4dFJlc3VsdDsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGFzIEl0ZXJhdG9ycy5TdGF0ZVF1ZXJ5SXRlcmF0b3I7XHJcblxyXG4gICAgICAgIGl0ZXJhdG9yWydhbGxJdGVtcyddID0gc2FtcGxlVmVuZG9yO1xyXG4gICAgICAgIGl0ZXJhdG9yWydjdXJyZW50SW5kZXgnXSA9IC0xO1xyXG5cclxuICAgICAgICBjdHguc3R1Yi5nZXRQcml2YXRlRGF0YUJ5UGFydGlhbENvbXBvc2l0ZUtleS53aXRoQXJncyh0ZXN0UERDTmFtZSwgJ3ZlbmRvcicsIFtdKS5yZXNvbHZlcyhpdGVyYXRvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnI3NhdmVWZW5kb3InLCAoKSA9PiB7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgdmVuZG9yJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3VmVuZG9yIDogVmVuZG9yID0ge1xyXG4gICAgICAgICAgICAgICAgXCJSZWNvcmRJRFwiOiBcIkRPRVNfTk9UX0VYSVNUXCIsXHJcbiAgICAgICAgICAgICAgICBcIlZlbmRvcklEXCI6IFwiRE9FU19OT1RfRVhJU1RcIixcclxuICAgICAgICAgICAgICAgIFwiUGFyZW50VmVuZG9ySURcIjogXCJET0VTX05PVF9FWElTVFwiLFxyXG4gICAgICAgICAgICAgICAgXCJOYW1lXCI6IFwiTmV3IFZlbmRvclwiLFxyXG4gICAgICAgICAgICAgICAgXCJUZW5hbnROYW1lXCI6IFwiYm9zY2hcIixcclxuICAgICAgICAgICAgICAgIFwiSExGT3JnYW5pemF0aW9uXCI6IFwiQm9zY2hPcmdcIixcclxuICAgICAgICAgICAgICAgIFwiSExGTWVtYmVyU2VydmljZXNQcm92aWRlclwiOiBcIkJvc2NoTVNQXCIsXHJcbiAgICAgICAgICAgICAgICBMYXN0VXBkYXRlZERhdGU6IDEyMDYyMDE5XHJcbiAgICAgICAgICAgIH0gYXMgVmVuZG9yO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3VsdFZlbmRvciA6IFZlbmRvcltdID0gYXdhaXQgY29udHJhY3Quc2F2ZVZlbmRvcihjdHgsIFtuZXdWZW5kb3JdKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBmaW5hbFZlbmRvciA6IFZlbmRvcltdID0gW107XHJcblxyXG4gICAgICAgICAgICBmaW5hbFZlbmRvciA9IFt7XHJcbiAgICAgICAgICAgICAgICBcIlJlY29yZElEXCI6IFwiRE9FU19FWElTVFwiLFxyXG4gICAgICAgICAgICAgICAgXCJWZW5kb3JJRFwiOiBcIkRPRVNfRVhJU1RcIixcclxuICAgICAgICAgICAgICAgIFwiUGFyZW50VmVuZG9ySURcIjogXCJET0VTX0VYSVNUXCIsXHJcbiAgICAgICAgICAgICAgICBcIk5hbWVcIjogXCJIb21lIERlcG90XCIsXHJcbiAgICAgICAgICAgICAgICBcIlRlbmFudE5hbWVcIjogXCJob21lZGVwb3RcIixcclxuICAgICAgICAgICAgICAgIFwiSExGT3JnYW5pemF0aW9uXCI6IFwiSG9tZURlcG90T3JnXCIsXHJcbiAgICAgICAgICAgICAgICBcIkhMRk1lbWJlclNlcnZpY2VzUHJvdmlkZXJcIjogXCJIb21lRGVwb3RNU1BcIixcclxuICAgICAgICAgICAgICAgIExhc3RVcGRhdGVkRGF0ZTogMTIwNjIwMTlcclxuICAgICAgICAgICAgfSx7XHJcbiAgICAgICAgICAgICAgICBcIlJlY29yZElEXCI6IFwiRE9FU19OT1RfRVhJU1RcIixcclxuICAgICAgICAgICAgICAgIFwiVmVuZG9ySURcIjogXCJET0VTX05PVF9FWElTVFwiLFxyXG4gICAgICAgICAgICAgICAgXCJQYXJlbnRWZW5kb3JJRFwiOiBcIkRPRVNfTk9UX0VYSVNUXCIsXHJcbiAgICAgICAgICAgICAgICBcIk5hbWVcIjogXCJOZXcgVmVuZG9yXCIsXHJcbiAgICAgICAgICAgICAgICBcIlRlbmFudE5hbWVcIjogXCJib3NjaFwiLFxyXG4gICAgICAgICAgICAgICAgXCJITEZPcmdhbml6YXRpb25cIjogXCJCb3NjaE9yZ1wiLFxyXG4gICAgICAgICAgICAgICAgXCJITEZNZW1iZXJTZXJ2aWNlc1Byb3ZpZGVyXCI6IFwiQm9zY2hNU1BcIixcclxuICAgICAgICAgICAgICAgIExhc3RVcGRhdGVkRGF0ZTogMTIwNjIwMTlcclxuICAgICAgICAgICAgfV0gYXMgVmVuZG9yW107XHJcblxyXG4gICAgICAgICAgICBjdHguc3R1Yi5wdXRQcml2YXRlRGF0YS5zaG91bGQuaGF2ZS5iZWVuLmNhbGxlZE9uY2VXaXRoRXhhY3RseSh0ZXN0UERDTmFtZSwgJyB2ZW5kb3IgREVGQVVMVCcsIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG5ldyBWZW5kb3JMaXN0KHsgSXRlbXM6IGZpbmFsVmVuZG9yIH0pKSkpO1xyXG4gICAgICAgICAgICBjaGFpLmV4cGVjdChyZXN1bHRWZW5kb3IpLnRvLmRlZXAuZXF1YWwoW25ld1ZlbmRvcl0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBhIHZlbmRvcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHVwZGF0ZWRWZW5kb3IgOiBWZW5kb3IgPSB7XHJcbiAgICAgICAgICAgICAgICBSZWNvcmRJRDogJ0RPRVNfRVhJU1QnLFxyXG4gICAgICAgICAgICAgICAgVmVuZG9ySUQ6ICdET0VTX0VYSVNUJyxcclxuICAgICAgICAgICAgICAgIFBhcmVudFZlbmRvcklEOiAnVVBEQVRFRF9WRU5ET1JfSUQnLFxyXG4gICAgICAgICAgICAgICAgTmFtZTogJ1VwZGF0ZWQgVmVuZG9yJyxcclxuICAgICAgICAgICAgICAgIFRlbmFudE5hbWU6ICdsdXRyb24nLFxyXG4gICAgICAgICAgICAgICAgSExGT3JnYW5pemF0aW9uOiAnTHV0cm9uT3JnJyxcclxuICAgICAgICAgICAgICAgIEhMRk1lbWJlclNlcnZpY2VzUHJvdmlkZXI6ICdMdXRyb25NU1AnLFxyXG4gICAgICAgICAgICAgICAgTGFzdFVwZGF0ZWREYXRlOiAxMjA2MjAxOVxyXG4gICAgICAgICAgICB9IGFzIFZlbmRvcjtcclxuXHJcbiAgICAgICAgICAgIGxldCByZXN1bHRWZW5kb3IgOiBWZW5kb3JbXSA9IGF3YWl0IGNvbnRyYWN0LnNhdmVWZW5kb3IoY3R4LCBbdXBkYXRlZFZlbmRvcl0pO1xyXG4gICAgICAgICAgICBjdHguc3R1Yi5wdXRQcml2YXRlRGF0YS5zaG91bGQuaGF2ZS5iZWVuLmNhbGxlZE9uY2VXaXRoRXhhY3RseSh0ZXN0UERDTmFtZSwgJyB2ZW5kb3IgREVGQVVMVCcsIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG5ldyBWZW5kb3JMaXN0KHsgSXRlbXM6IFt1cGRhdGVkVmVuZG9yXSB9KSkpKTtcclxuICAgICAgICAgICAgY2hhaS5leHBlY3QocmVzdWx0VmVuZG9yKS50by5kZWVwLmVxdWFsKFt1cGRhdGVkVmVuZG9yXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJyNyZXRyaWV2ZVZlbmRvcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgVmVuZG9yIGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IGNvbnRyYWN0LnJldHJpZXZlVmVuZG9yKGN0eCkuc2hvdWxkLmV2ZW50dWFsbHkuZGVlcC5lcXVhbChzYW1wbGVWZW5kb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG5cclxufSk7XHJcbiJdfQ==